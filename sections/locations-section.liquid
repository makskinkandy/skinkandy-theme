<div class="locations-section page-content {{ section.settings.class | escape }}" style="background-color: {{ section.settings.bg_color }}">
    <div class="page-width wrapper">
        <div class="section-content">
            {%- if section.settings.heading != blank -%}
                <h2 class="heading h1">{{ section.settings.heading | newline_to_br }}</h2>
            {%- endif -%}

            {%- if section.settings.menu != blank -%}
                <ul class="menu-list no-bullets">
                    {%- for link in section.settings.menu.links -%}
                        <li>
                            <span class="js-accordion">
                                {{ link.title }}
                                {%- render 'icons', icon: 'plus' -%}
                            </span>
                            
                            {%- if link.links.size > 0 -%}
                                <ul class="menu-list--submenu no-bullets">
                                    {%- for childlink in link.links -%}
                                        <li>
                                            {%- if childlink.url == '#' -%}
                                                <span class="menu-list--submenu-item">
                                                    {{ childlink.title }}
                                                    <img src="{{ 'ico-arrow.svg' | asset_url }}" aria-hidden="true" style="width: 18px; height: 15px;">
                                                </span>
                                            {%- else -%}
                                                <a class="menu-list--submenu-item" href="{{ childlink.url }}">
                                                    {{ childlink.title }}
                                                    <img src="{{ 'ico-arrow.svg' | asset_url }}" aria-hidden="true" style="width: 18px; height: 15px;">
                                                </a>
                                            {%- endif -%}
                                        </li>
                                    {%- endfor -%}
                                </ul>
                            {%- endif -%}
                        </li>
                    {%- endfor -%}
                </ul>
            {%- endif -%}

            {%- if section.settings.link != blank -%}
                <a class="btn {{ section.settings.linkclass | escape }}" href="{{ section.settings.link | escape }}">{{ section.settings.linktext | escape }}</a>
            {%- endif -%}
        </div>

        {%- if section.settings.image != blank -%}
            <div class="section-image">
                <img src="{{ section.settings.image | img_url: '900x'}}" alt="{{ section.settings.image.alt | escape }}">
            </div>
        {%- endif -%}
    </div>
</div>

{% schema %}
{
    "name": "Locations section",
    "settings": [
        {
            "type": "text",
            "id": "class",
            "label": "Optional section class"
        },
        {
            "type": "color",
            "id": "bg_color",
            "label": "Background color"
        },
        {
            "type": "textarea",
            "id": "heading",
            "label": "Section heading"
        },
        {
            "type": "image_picker",
            "id": "image",
            "label": "Section image"
        },
        {
            "type": "link_list",
            "id": "menu",
            "label": "Menu"
        },
        {
            "type": "url",
            "id": "link",
            "label": "Optional link"
        },
        {
            "type": "text",
            "id": "linktext",
            "label": "Link text"
        },
        {
            "type": "text",
            "id": "linkclass",
            "label": "Optional link class"
        }
    ],
    "presets": [{
        "name": "Locations section"
    }]
}
{% endschema %}